{"version":3,"file":"cool-http.service.js","sourceRoot":"","sources":["../../src/cool-http.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders, HttpResponse } from '@angular/common/http';\r\nimport { Observable } from 'rxjs/Rx';\r\n\r\nimport { HttpHeader } from './http-header.model';\r\nimport { CookieStore } from './cookie-store.service';\r\nimport { IRequestInterceptor } from './request-interceptor.interface';\r\nimport { IResponseInterceptor } from './response-interceptor.interface';\r\nimport { HttpError } from './http-error.model';\r\nimport { DEFAULT_REQUEST_OPTIONS, RequestOptions } from './request-options.interface';\r\n\r\nexport interface Func<T, T1, T2, TResult> {\r\n  (item: T, item1: T1, item2: T2): TResult;\r\n}\r\n\r\n@Injectable()\r\nexport class CoolHttp {\r\n  private _cookieStore: CookieStore = new CookieStore();\r\n\r\n  private _globalHeaders: HttpHeader[] = [];\r\n  private _requestInterceptors: IRequestInterceptor[] = [];\r\n  private _responseInterceptors: IResponseInterceptor[] = [];\r\n  private _customCookieToHeaders = [];\r\n  private _baseUrl;\r\n  private _withCredentials;\r\n\r\n  constructor(private _http: HttpClient) {\r\n  }\r\n\r\n  public get baseUrl(): string {\r\n    return this._baseUrl;\r\n  }\r\n\r\n  public registerBaseUrl(baseUrl: string): void {\r\n    this._baseUrl = baseUrl;\r\n\r\n    if (this._baseUrl[this._baseUrl.length - 1] !== '/') {\r\n      this._baseUrl += '/';\r\n    }\r\n  }\r\n  \r\n  public deRegisterBaseUrl(): void {\r\n    this._baseUrl = null;\r\n  }\r\n\r\n  public setWithCredentials(status: boolean): void {\r\n    this._withCredentials = status;\r\n  }\r\n\r\n  public registerGlobalHeader(header: HttpHeader): void {\r\n    this.deregisterGlobalHeader(header.key);\r\n\r\n    this._globalHeaders.push(header);\r\n  }\r\n\r\n  public deregisterGlobalHeader(headerKey: string): boolean {\r\n    const indexOfHeader = this._globalHeaders.findIndex(header => header.key === headerKey);\r\n\r\n    if (indexOfHeader === -1) {\r\n      return false;\r\n    }\r\n\r\n    this._globalHeaders.splice(indexOfHeader, 1);\r\n\r\n    return true;\r\n  }\r\n\r\n  public removeAllRegisteredGlobalHeaders(): void {\r\n    this._globalHeaders.length = 0;\r\n  }\r\n\r\n  public registerRequestInterceptor(requestInterceptor: IRequestInterceptor): void {\r\n    this._requestInterceptors.push(requestInterceptor);\r\n  }\r\n\r\n  public deregisterRequestInterceptor(requestInterceptor: IRequestInterceptor): boolean {\r\n    let indexOfItem = this._requestInterceptors.indexOf(requestInterceptor);\r\n\r\n    if (indexOfItem === -1) {\r\n      return false;\r\n    }\r\n\r\n    this._requestInterceptors.splice(indexOfItem, 1);\r\n\r\n    return true;\r\n  }\r\n\r\n  public registerResponseInterceptor(responseInterceptor: IResponseInterceptor): void {\r\n    this._responseInterceptors.push(responseInterceptor);\r\n  }\r\n\r\n  public deregisterResponseInterceptor(responseInterceptor: IResponseInterceptor): boolean {\r\n    let indexOfItem = this._responseInterceptors.indexOf(responseInterceptor);\r\n\r\n    if (indexOfItem === -1) {\r\n      return false;\r\n    }\r\n\r\n    this._responseInterceptors.splice(indexOfItem, 1);\r\n\r\n    return true;\r\n  }\r\n\r\n  public sendCookieValueInCustomHeader(cookieName: string, customHeaderName: string): void {\r\n    this._customCookieToHeaders.push({\r\n      cookieName: cookieName,\r\n      customHeaderName: customHeaderName\r\n    });\r\n  }\r\n\r\n  public async getAsync<T = any>(url: string, options: RequestOptions = DEFAULT_REQUEST_OPTIONS): Promise<T> {\r\n    let that = this;\r\n\r\n    return await that._requestCoreAsync<T>(url, 'GET', null, options, (url, data, modOptions) => {\r\n      return that._http.get(url, modOptions);\r\n    });\r\n  }\r\n\r\n  public async postAsync<T = any>(url: string, data?: any, options: RequestOptions = DEFAULT_REQUEST_OPTIONS): Promise<T> {\r\n    let that = this;\r\n\r\n    return await that._requestCoreAsync<T>(url, 'POST', data, options, (url, data, modOptions) => {\r\n      return that._http.post(url, data, modOptions);\r\n    });\r\n  }\r\n\r\n  public async putAsync<T = any>(url: string, data?: any, options: RequestOptions = DEFAULT_REQUEST_OPTIONS): Promise<T> {\r\n    let that = this;\r\n\r\n    return await that._requestCoreAsync<T>(url, 'PUT', data, options, (url, data, modOptions) => {\r\n      return that._http.put(url, data, modOptions);\r\n    });\r\n  }\r\n\r\n  public async deleteAsync<T = any>(url: string, options: RequestOptions = DEFAULT_REQUEST_OPTIONS): Promise<T> {\r\n    let that = this;\r\n\r\n    return await that._requestCoreAsync<T>(url, 'DELETE', null, options, (url, data, modOptions) => {\r\n      return that._http['delete'](url, modOptions);\r\n    });\r\n  }\r\n\r\n  public async patchAsync<T = any>(url: string, data?: any, options: RequestOptions = DEFAULT_REQUEST_OPTIONS): Promise<T> {\r\n    let that = this;\r\n\r\n    return await that._requestCoreAsync<T>(url, 'PATCH', data, options, (url, data, modOptions) => {\r\n      return that._http.patch(url, data, modOptions);\r\n    });\r\n  }\r\n\r\n  public async headAsync<T = any>(url: string, options: RequestOptions = DEFAULT_REQUEST_OPTIONS): Promise<T> {\r\n    let that = this;\r\n\r\n    return await that._requestCoreAsync<T>(url, 'HEAD', null, options, (url, data, modOptions) => {\r\n      return that._http.head(url, modOptions);\r\n    });\r\n  }\r\n\r\n  private async _requestCoreAsync<T = any>(url: string, method: string, data: any, options: RequestOptions, action: Func<string, any, RequestOptions, Observable<HttpResponse<string>>>): Promise<T> {\r\n    options.headers = options.headers || new HttpHeaders();\r\n    options.observe = 'response';\r\n    options.responseType = 'text';\r\n\r\n    url = this._convertUrl(url);\r\n\r\n    options.headers = this._appendGlobalHeaders(<HttpHeaders> options.headers);\r\n\r\n    options.headers = this._tryAppendRegisteredCookiesToCustomHeaders(<HttpHeaders> options.headers);\r\n\r\n    this._modifyOptions(options);\r\n\r\n    let clientHeaders = this._convertAngularHeadersToHttpClientHeaders(<HttpHeaders> options.headers);\r\n\r\n    let shouldIntercept = await this._invokeRequestInterceptorsAsync(url, method, data, clientHeaders);\r\n\r\n    if (shouldIntercept) {\r\n      return;\r\n    }\r\n\r\n    options.headers = this._updateAngularHeadersFromHttpClientHeaders(clientHeaders, <HttpHeaders> options.headers);\r\n\r\n    let response: HttpResponse<string>;\r\n\r\n    try {\r\n      response = await action(url, data, options).toPromise();\r\n    }\r\n    catch (errorResponse) {\r\n      response = errorResponse;\r\n    }\r\n\r\n    shouldIntercept = await this._invokeResponseInterceptorsAsync(response, url, method, data, clientHeaders);\r\n\r\n    if (shouldIntercept) {\r\n      return;\r\n    }\r\n\r\n    if (!response.ok) {\r\n      throw new HttpError(method, url, response.status, response.statusText, JSON.stringify(response.body));\r\n    }\r\n\r\n    let returnValue;\r\n\r\n    try {\r\n      returnValue = JSON.parse(response.body);\r\n    }\r\n    catch (e) {\r\n      returnValue = { data: response.body };\r\n    }\r\n\r\n    return <T> returnValue;\r\n  }\r\n\r\n  public getObservable<T = any>(url: string, options: RequestOptions = DEFAULT_REQUEST_OPTIONS): Observable<T> {\r\n    let that = this;\r\n\r\n    return that._requestCoreObservable<T>(url, 'GET', null, options, (url, data, modOptions) => {\r\n      return that._http.get(url, modOptions);\r\n    });\r\n  }\r\n\r\n  public postObservable<T = any>(url: string, data: any, options: RequestOptions = DEFAULT_REQUEST_OPTIONS): Observable<T> {\r\n    let that = this;\r\n\r\n    return that._requestCoreObservable<T>(url, 'POST', data, options, (url, data, modOptions) => {\r\n      return that._http.post(url, data, modOptions);\r\n    });\r\n  }\r\n\r\n  public putObservable<T = any>(url: string, data: any, options: RequestOptions = DEFAULT_REQUEST_OPTIONS): Observable<T> {\r\n    let that = this;\r\n\r\n    return that._requestCoreObservable<T>(url, 'PUT', data, options, (url, data, modOptions) => {\r\n      return that._http.put(url, data, modOptions);\r\n    });\r\n  }\r\n\r\n  public deleteObservable<T = any>(url: string, options: RequestOptions = DEFAULT_REQUEST_OPTIONS): Observable<T> {\r\n    let that = this;\r\n\r\n    return that._requestCoreObservable<T>(url, 'DELETE', null, options, (url, data, modOptions) => {\r\n      return that._http['delete'](url, modOptions);\r\n    });\r\n  }\r\n\r\n  public patchObservable<T = any>(url: string, data: any, options: RequestOptions = DEFAULT_REQUEST_OPTIONS): Observable<T> {\r\n    let that = this;\r\n\r\n    return that._requestCoreObservable<T>(url, 'PATCH', data, options, (url, data, modOptions) => {\r\n      return that._http.patch(url, data, modOptions);\r\n    });\r\n  }\r\n\r\n  public headObservable<T = any>(url: string, options: RequestOptions = DEFAULT_REQUEST_OPTIONS): Observable<T> {\r\n    let that = this;\r\n\r\n    return that._requestCoreObservable<T>(url, 'HEAD', null, options, (url, data, modOptions) => {\r\n      return that._http.head(url, modOptions);\r\n    });\r\n  }\r\n\r\n  private _requestCoreObservable<T = any>(url: string, method: string, data: any, options: RequestOptions, action: Func<string, any, RequestOptions, Observable<HttpResponse<string>>>): Observable<T> {\r\n    return Observable.fromPromise(this._requestCoreAsync(url, method, data, options, action));\r\n  }\r\n\r\n  private _convertUrl(url: string) {\r\n    let returnUrl = url;\r\n\r\n    if (this._baseUrl) {\r\n      returnUrl = this._baseUrl + returnUrl;\r\n    }\r\n\r\n    return returnUrl;\r\n  }\r\n\r\n  private _modifyOptions(options: RequestOptions) {\r\n    if (this._withCredentials) {\r\n      options.withCredentials = true;\r\n    }\r\n  }\r\n\r\n  private _appendGlobalHeaders(headers: HttpHeaders): HttpHeaders {\r\n    let newHeaders = headers;\r\n\r\n    for (const registeredHeader of this._globalHeaders) {\r\n      newHeaders = headers.set(registeredHeader.key, registeredHeader.value);\r\n    }\r\n\r\n    return newHeaders;\r\n  }\r\n\r\n  private _tryAppendRegisteredCookiesToCustomHeaders(headers: HttpHeaders): HttpHeaders {\r\n    let newHeaders = headers;\r\n\r\n    for (const cookieToHeader of this._customCookieToHeaders) {\r\n      const cookieValue = this._cookieStore.getCookie(cookieToHeader.cookieName);\r\n\r\n      if (cookieValue) {\r\n        newHeaders = headers.set(cookieToHeader.customHeaderName, cookieValue);\r\n      }\r\n    }\r\n\r\n    return newHeaders;\r\n  }\r\n\r\n  private async _invokeRequestInterceptorsAsync(url: string, method: string, data: any, headers: HttpHeader[]): Promise<boolean> {\r\n    for (const requestInterceptor of this._requestInterceptors) {\r\n      const shouldIntercept = await requestInterceptor.beforeRequestAsync(url, method, data, headers);\r\n\r\n      if (shouldIntercept) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  private async _invokeResponseInterceptorsAsync(response: HttpResponse<Object>, url: string, method: string, data: any, headers: HttpHeader[]): Promise<boolean> {\r\n    for (const responseInterceptor of this._responseInterceptors) {\r\n      const shouldIntercept = await responseInterceptor.afterResponseAsync(response, url, method, data, headers);\r\n\r\n      if (shouldIntercept) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  private _convertAngularHeadersToHttpClientHeaders(headers: HttpHeaders): HttpHeader[] {\r\n    return headers.keys().map(headerKey => {\r\n      const httpClientHeader = new HttpHeader();\r\n\r\n      httpClientHeader.key = headerKey;\r\n      httpClientHeader.value = headers.get(headerKey);\r\n\r\n      return httpClientHeader;\r\n    });\r\n  }\r\n\r\n  private _updateAngularHeadersFromHttpClientHeaders(httpClientHeaders: HttpHeader[], headers: HttpHeaders): HttpHeaders {\r\n    let newHeaders = headers;\r\n\r\n    for (const clientHeader of httpClientHeaders) {\r\n      const headerValue = headers.get(clientHeader.key);\r\n\r\n      if (headerValue !== clientHeader.value) {\r\n        newHeaders = headers.set(clientHeader.key, clientHeader.value);\r\n      }\r\n    }\r\n\r\n    return newHeaders;\r\n  }\r\n}\r\n"]}