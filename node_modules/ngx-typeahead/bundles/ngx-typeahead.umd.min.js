!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("@angular/core"),require("@angular/common"),require("@angular/common/http"),require("rxjs/operators")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/common/http","rxjs/operators"],factory):factory((global.ng=global.ng||{},global.ng.ngxTypeahead={}),global.ng.core,global.ng.common,global.ng.commmon.http,global.Rx.Observable.prototype)}(this,function(exports,core,common,http,operators){"use strict";function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function isFunction(x){return"function"==typeof x}function hostReportError(err){setTimeout(function(){throw err})}function isObject(x){return null!=x&&"object"==typeof x}function tryCatcher(){try{return tryCatchTarget.apply(this,arguments)}catch(e){return errorObject.e=e,errorObject}}function tryCatch(fn){return tryCatchTarget=fn,tryCatcher}function flattenUnsubscriptionErrors(errors){return errors.reduce(function(errs,err){return errs.concat(err instanceof UnsubscriptionError?err.errors:err)},[])}function isTrustedSubscriber(obj){return obj instanceof Subscriber||"syncErrorThrowable"in obj&&obj[rxSubscriber]}function toSubscriber(nextOrObserver,error,complete){if(nextOrObserver){if(nextOrObserver instanceof Subscriber)return nextOrObserver;if(nextOrObserver[rxSubscriber])return nextOrObserver[rxSubscriber]()}return nextOrObserver||error||complete?new Subscriber(nextOrObserver,error,complete):new Subscriber(empty)}function noop(){}function pipeFromArray(fns){return fns?1===fns.length?fns[0]:function(input){return fns.reduce(function(prev,fn){return fn(prev)},input)}:noop}function getPromiseCtor(promiseCtor){if(promiseCtor||(promiseCtor=config.Promise||Promise),!promiseCtor)throw new Error("no Promise impl found");return promiseCtor}function empty$1(scheduler){return scheduler?emptyScheduled(scheduler):EMPTY}function emptyScheduled(scheduler){return new Observable(function(subscriber){return scheduler.schedule(function(){return subscriber.complete()})})}function isScheduler(value){return value&&"function"==typeof value.schedule}function fromArray(input,scheduler){return new Observable(scheduler?function(subscriber){var sub=new Subscription,i=0;return sub.add(scheduler.schedule(function(){i!==input.length?(subscriber.next(input[i++]),subscriber.closed||sub.add(this.schedule())):subscriber.complete()})),sub}:subscribeToArray(input))}function scalar(value){var result=new Observable(function(subscriber){subscriber.next(value),subscriber.complete()});return result._isScalar=!0,result.value=value,result}function of(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var scheduler=args[args.length-1];switch(isScheduler(scheduler)?args.pop():scheduler=void 0,args.length){case 0:return empty$1(scheduler);case 1:return scheduler?fromArray(args,scheduler):scalar(args[0]);default:return fromArray(args,scheduler)}}function validateNonCharKeyCode(keyCode){return[Key.Enter,Key.Tab,Key.Shift,Key.ArrowLeft,Key.ArrowUp,Key.ArrowRight,Key.ArrowDown,Key.MacCommandLeft,Key.MacCommandRight,Key.MacCommandFirefox].every(function(codeKey){return codeKey!==keyCode})}function validateArrowKeys(keyCode){return keyCode===Key.ArrowDown||keyCode===Key.ArrowUp}function isIndexActive(index,currentIndex){return index===currentIndex}function isEnterKey(event){return event.keyCode===Key.Enter}function isEscapeKey(event){return event.keyCode===Key.Escape}function createParamsForQuery(query,queryParamKey,customParams){void 0===queryParamKey&&(queryParamKey="q"),void 0===customParams&&(customParams={});var searchParams=__assign$1((_a={},_a[queryParamKey]=query,_a),customParams);return Object.keys(searchParams).reduce(function(acc,param){return acc.set(param,searchParams[param])},new http.HttpParams);var _a}function resolveApiMethod(method){return void 0===method&&(method=""),["get","post","put","delete","patch","request"].some(function(methodName){return method===methodName})?method:"get"}function resolveNextIndex(currentIndex,stepUp,listLength){void 0===listLength&&(listLength=10);var topLimit=listLength-1,currentResultIndex=currentIndex+(stepUp?1:-1),resultIndex=currentResultIndex;return currentResultIndex===topLimit+1&&(resultIndex=0),-1===currentResultIndex&&(resultIndex=topLimit),resultIndex}function toJsonpSingleResult(response){return response[1]}function toJsonpFinalResults(results){return results.map(function(result){return result[0]})}function hasCharacters(query){return query.length>0}function toFormControlValue(e){return e.target.value}function resolveItemValue(item,fieldsToExtract,caseSensitive){void 0===caseSensitive&&(caseSensitive=!1);var newItem=item;return item.hasOwnProperty("length")||(newItem=(fieldsToExtract.length?fieldsToExtract:Object.keys(item)).reduce(function(acc,cur){return""+acc+item[cur]},"")),caseSensitive?newItem:newItem.toLowerCase()}var tryCatchTarget,extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},_enable_super_gross_mode_that_will_cause_bad_things=!1,config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(value){value&&(new Error).stack,_enable_super_gross_mode_that_will_cause_bad_things=value},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}},empty={closed:!0,next:function(value){},error:function(err){if(config.useDeprecatedSynchronousErrorHandling)throw err;hostReportError(err)},complete:function(){}},isArray=Array.isArray||function(x){return x&&"number"==typeof x.length},errorObject={e:{}},UnsubscriptionError=function(_super){function UnsubscriptionError(errors){var _this=_super.call(this,errors?errors.length+" errors occurred during unsubscription:\n  "+errors.map(function(err,i){return i+1+") "+err.toString()}).join("\n  "):"")||this;return _this.errors=errors,_this.name="UnsubscriptionError",Object.setPrototypeOf(_this,UnsubscriptionError.prototype),_this}return __extends(UnsubscriptionError,_super),UnsubscriptionError}(Error),Subscription=function(){function Subscription(unsubscribe){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,unsubscribe&&(this._unsubscribe=unsubscribe)}return Subscription.prototype.unsubscribe=function(){var errors,hasErrors=!1;if(!this.closed){var _a=this,_parent=_a._parent,_parents=_a._parents,_unsubscribe=_a._unsubscribe,_subscriptions=_a._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var index=-1,len=_parents?_parents.length:0;_parent;)_parent.remove(this),_parent=++index<len&&_parents[index]||null;if(isFunction(_unsubscribe)&&(trial=tryCatch(_unsubscribe).call(this))===errorObject&&(hasErrors=!0,errors=errors||(errorObject.e instanceof UnsubscriptionError?flattenUnsubscriptionErrors(errorObject.e.errors):[errorObject.e])),isArray(_subscriptions))for(index=-1,len=_subscriptions.length;++index<len;){var sub=_subscriptions[index];if(isObject(sub)){var trial=tryCatch(sub.unsubscribe).call(sub);if(trial===errorObject){hasErrors=!0,errors=errors||[];var err=errorObject.e;err instanceof UnsubscriptionError?errors=errors.concat(flattenUnsubscriptionErrors(err.errors)):errors.push(err)}}}if(hasErrors)throw new UnsubscriptionError(errors)}},Subscription.prototype.add=function(teardown){if(!teardown||teardown===Subscription.EMPTY)return Subscription.EMPTY;if(teardown===this)return this;var subscription=teardown;switch(typeof teardown){case"function":subscription=new Subscription(teardown);case"object":if(subscription.closed||"function"!=typeof subscription.unsubscribe)return subscription;if(this.closed)return subscription.unsubscribe(),subscription;if("function"!=typeof subscription._addParent){var tmp=subscription;(subscription=new Subscription)._subscriptions=[tmp]}break;default:throw new Error("unrecognized teardown "+teardown+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(subscription),subscription._addParent(this),subscription},Subscription.prototype.remove=function(subscription){var subscriptions=this._subscriptions;if(subscriptions){var subscriptionIndex=subscriptions.indexOf(subscription);-1!==subscriptionIndex&&subscriptions.splice(subscriptionIndex,1)}},Subscription.prototype._addParent=function(parent){var _a=this,_parent=_a._parent,_parents=_a._parents;_parent&&_parent!==parent?_parents?-1===_parents.indexOf(parent)&&_parents.push(parent):this._parents=[parent]:this._parent=parent},Subscription.EMPTY=function(empty){return empty.closed=!0,empty}(new Subscription),Subscription}(),rxSubscriber="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",Subscriber=function(_super){function Subscriber(destinationOrNext,error,complete){var _this=_super.call(this)||this;switch(_this.syncErrorValue=null,_this.syncErrorThrown=!1,_this.syncErrorThrowable=!1,_this.isStopped=!1,arguments.length){case 0:_this.destination=empty;break;case 1:if(!destinationOrNext){_this.destination=empty;break}if("object"==typeof destinationOrNext){if(isTrustedSubscriber(destinationOrNext)){var trustedSubscriber=destinationOrNext[rxSubscriber]();_this.syncErrorThrowable=trustedSubscriber.syncErrorThrowable,_this.destination=trustedSubscriber,trustedSubscriber.add(_this)}else _this.syncErrorThrowable=!0,_this.destination=new SafeSubscriber(_this,destinationOrNext);break}default:_this.syncErrorThrowable=!0,_this.destination=new SafeSubscriber(_this,destinationOrNext,error,complete)}return _this}return __extends(Subscriber,_super),Subscriber.prototype[rxSubscriber]=function(){return this},Subscriber.create=function(next,error,complete){var subscriber=new Subscriber(next,error,complete);return subscriber.syncErrorThrowable=!1,subscriber},Subscriber.prototype.next=function(value){this.isStopped||this._next(value)},Subscriber.prototype.error=function(err){this.isStopped||(this.isStopped=!0,this._error(err))},Subscriber.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,_super.prototype.unsubscribe.call(this))},Subscriber.prototype._next=function(value){this.destination.next(value)},Subscriber.prototype._error=function(err){this.destination.error(err),this.unsubscribe()},Subscriber.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},Subscriber.prototype._unsubscribeAndRecycle=function(){var _a=this,_parent=_a._parent,_parents=_a._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=_parent,this._parents=_parents,this},Subscriber}(Subscription),SafeSubscriber=function(_super){function SafeSubscriber(_parentSubscriber,observerOrNext,error,complete){var _this=_super.call(this)||this;_this._parentSubscriber=_parentSubscriber;var next,context=_this;return isFunction(observerOrNext)?next=observerOrNext:observerOrNext&&(next=observerOrNext.next,error=observerOrNext.error,complete=observerOrNext.complete,observerOrNext!==empty&&(isFunction((context=Object.create(observerOrNext)).unsubscribe)&&_this.add(context.unsubscribe.bind(context)),context.unsubscribe=_this.unsubscribe.bind(_this))),_this._context=context,_this._next=next,_this._error=error,_this._complete=complete,_this}return __extends(SafeSubscriber,_super),SafeSubscriber.prototype.next=function(value){if(!this.isStopped&&this._next){var _parentSubscriber=this._parentSubscriber;config.useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?this.__tryOrSetError(_parentSubscriber,this._next,value)&&this.unsubscribe():this.__tryOrUnsub(this._next,value)}},SafeSubscriber.prototype.error=function(err){if(!this.isStopped){var _parentSubscriber=this._parentSubscriber,useDeprecatedSynchronousErrorHandling=config.useDeprecatedSynchronousErrorHandling;if(this._error)useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?(this.__tryOrSetError(_parentSubscriber,this._error,err),this.unsubscribe()):(this.__tryOrUnsub(this._error,err),this.unsubscribe());else if(_parentSubscriber.syncErrorThrowable)useDeprecatedSynchronousErrorHandling?(_parentSubscriber.syncErrorValue=err,_parentSubscriber.syncErrorThrown=!0):hostReportError(err),this.unsubscribe();else{if(this.unsubscribe(),useDeprecatedSynchronousErrorHandling)throw err;hostReportError(err)}}},SafeSubscriber.prototype.complete=function(){var _this=this;if(!this.isStopped){var _parentSubscriber=this._parentSubscriber;if(this._complete){var wrappedComplete=function(){return _this._complete.call(_this._context)};config.useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?(this.__tryOrSetError(_parentSubscriber,wrappedComplete),this.unsubscribe()):(this.__tryOrUnsub(wrappedComplete),this.unsubscribe())}else this.unsubscribe()}},SafeSubscriber.prototype.__tryOrUnsub=function(fn,value){try{fn.call(this._context,value)}catch(err){if(this.unsubscribe(),config.useDeprecatedSynchronousErrorHandling)throw err;hostReportError(err)}},SafeSubscriber.prototype.__tryOrSetError=function(parent,fn,value){if(!config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{fn.call(this._context,value)}catch(err){return config.useDeprecatedSynchronousErrorHandling?(parent.syncErrorValue=err,parent.syncErrorThrown=!0,!0):(hostReportError(err),!0)}return!1},SafeSubscriber.prototype._unsubscribe=function(){var _parentSubscriber=this._parentSubscriber;this._context=null,this._parentSubscriber=null,_parentSubscriber.unsubscribe()},SafeSubscriber}(Subscriber),observable="function"==typeof Symbol&&Symbol.observable||"@@observable",Observable=function(){function Observable(subscribe){this._isScalar=!1,subscribe&&(this._subscribe=subscribe)}return Observable.prototype.lift=function(operator){var observable$$1=new Observable;return observable$$1.source=this,observable$$1.operator=operator,observable$$1},Observable.prototype.subscribe=function(observerOrNext,error,complete){var operator=this.operator,sink=toSubscriber(observerOrNext,error,complete);if(operator?operator.call(sink,this.source):sink.add(this.source||!sink.syncErrorThrowable?this._subscribe(sink):this._trySubscribe(sink)),config.useDeprecatedSynchronousErrorHandling&&sink.syncErrorThrowable&&(sink.syncErrorThrowable=!1,sink.syncErrorThrown))throw sink.syncErrorValue;return sink},Observable.prototype._trySubscribe=function(sink){try{return this._subscribe(sink)}catch(err){config.useDeprecatedSynchronousErrorHandling&&(sink.syncErrorThrown=!0,sink.syncErrorValue=err),sink.error(err)}},Observable.prototype.forEach=function(next,promiseCtor){var _this=this;return new(promiseCtor=getPromiseCtor(promiseCtor))(function(resolve,reject){var subscription;subscription=_this.subscribe(function(value){try{next(value)}catch(err){reject(err),subscription&&subscription.unsubscribe()}},reject,resolve)})},Observable.prototype._subscribe=function(subscriber){var source=this.source;return source&&source.subscribe(subscriber)},Observable.prototype[observable]=function(){return this},Observable.prototype.pipe=function(){for(var operations=[],_i=0;_i<arguments.length;_i++)operations[_i]=arguments[_i];return 0===operations.length?this:pipeFromArray(operations)(this)},Observable.prototype.toPromise=function(promiseCtor){var _this=this;return new(promiseCtor=getPromiseCtor(promiseCtor))(function(resolve,reject){var value;_this.subscribe(function(x){return value=x},function(err){return reject(err)},function(){return resolve(value)})})},Observable.create=function(subscribe){return new Observable(subscribe)},Observable}(),ObjectUnsubscribedError=function(_super){function ObjectUnsubscribedError(){var _this=_super.call(this,"object unsubscribed")||this;return _this.name="ObjectUnsubscribedError",Object.setPrototypeOf(_this,ObjectUnsubscribedError.prototype),_this}return __extends(ObjectUnsubscribedError,_super),ObjectUnsubscribedError}(Error),SubjectSubscription=function(_super){function SubjectSubscription(subject,subscriber){var _this=_super.call(this)||this;return _this.subject=subject,_this.subscriber=subscriber,_this.closed=!1,_this}return __extends(SubjectSubscription,_super),SubjectSubscription.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var subject=this.subject,observers=subject.observers;if(this.subject=null,observers&&0!==observers.length&&!subject.isStopped&&!subject.closed){var subscriberIndex=observers.indexOf(this.subscriber);-1!==subscriberIndex&&observers.splice(subscriberIndex,1)}}},SubjectSubscription}(Subscription),SubjectSubscriber=function(_super){function SubjectSubscriber(destination){var _this=_super.call(this,destination)||this;return _this.destination=destination,_this}return __extends(SubjectSubscriber,_super),SubjectSubscriber}(Subscriber),Subject=function(_super){function Subject(){var _this=_super.call(this)||this;return _this.observers=[],_this.closed=!1,_this.isStopped=!1,_this.hasError=!1,_this.thrownError=null,_this}return __extends(Subject,_super),Subject.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},Subject.prototype.lift=function(operator){var subject=new AnonymousSubject(this,this);return subject.operator=operator,subject},Subject.prototype.next=function(value){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].next(value)},Subject.prototype.error=function(err){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=err,this.isStopped=!0;for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].error(err);this.observers.length=0},Subject.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].complete();this.observers.length=0},Subject.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Subject.prototype._trySubscribe=function(subscriber){if(this.closed)throw new ObjectUnsubscribedError;return _super.prototype._trySubscribe.call(this,subscriber)},Subject.prototype._subscribe=function(subscriber){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(subscriber.error(this.thrownError),Subscription.EMPTY):this.isStopped?(subscriber.complete(),Subscription.EMPTY):(this.observers.push(subscriber),new SubjectSubscription(this,subscriber))},Subject.prototype.asObservable=function(){var observable=new Observable;return observable.source=this,observable},Subject.create=function(destination,source){return new AnonymousSubject(destination,source)},Subject}(Observable),AnonymousSubject=function(_super){function AnonymousSubject(destination,source){var _this=_super.call(this)||this;return _this.destination=destination,_this.source=source,_this}return __extends(AnonymousSubject,_super),AnonymousSubject.prototype.next=function(value){var destination=this.destination;destination&&destination.next&&destination.next(value)},AnonymousSubject.prototype.error=function(err){var destination=this.destination;destination&&destination.error&&this.destination.error(err)},AnonymousSubject.prototype.complete=function(){var destination=this.destination;destination&&destination.complete&&this.destination.complete()},AnonymousSubject.prototype._subscribe=function(subscriber){return this.source?this.source.subscribe(subscriber):Subscription.EMPTY},AnonymousSubject}(Subject),EMPTY=new Observable(function(subscriber){return subscriber.complete()}),subscribeToArray=function(array){return function(subscriber){for(var i=0,len=array.length;i<len&&!subscriber.closed;i++)subscriber.next(array[i]);subscriber.closed||subscriber.complete()}},__assign$1=(Error,Error,Error,Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t}),Key={Backspace:8,Tab:9,Enter:13,Shift:16,Escape:27,ArrowLeft:37,ArrowRight:39,ArrowUp:38,ArrowDown:40,MacCommandLeft:91,MacCommandRight:93,MacCommandFirefox:224};Key[Key.Backspace]="Backspace",Key[Key.Tab]="Tab",Key[Key.Enter]="Enter",Key[Key.Shift]="Shift",Key[Key.Escape]="Escape",Key[Key.ArrowLeft]="ArrowLeft",Key[Key.ArrowRight]="ArrowRight",Key[Key.ArrowUp]="ArrowUp",Key[Key.ArrowDown]="ArrowDown",Key[Key.MacCommandLeft]="MacCommandLeft",Key[Key.MacCommandRight]="MacCommandRight",Key[Key.MacCommandFirefox]="MacCommandFirefox";var NgxTypeAheadComponent=function(){function NgxTypeAheadComponent(element,viewContainer,http$$1,cdr){this.element=element,this.viewContainer=viewContainer,this.http=http$$1,this.cdr=cdr,this.showSuggestions=!1,this.results=[],this.taUrl="",this.taParams={},this.taQueryParam="q",this.taApi="jsonp",this.taApiMethod="get",this.taList=[],this.taListItemField=[],this.taListItemLabel="",this.taDebounce=300,this.taAllowEmpty=!1,this.taCaseSensitive=!1,this.taDisplayOnFocus=!1,this.taSelected=new core.EventEmitter,this.suggestionIndex=0,this.subscriptions=[],this.activeResult="",this.searchQuery="",this.selectedItem={},this.resultsAsItems=[],this.keydown$=new Subject,this.keyup$=new Subject}return NgxTypeAheadComponent.prototype.handleEsc=function(event){isEscapeKey(event)&&(this.hideSuggestions(),event.preventDefault()),this.keydown$.next(event)},NgxTypeAheadComponent.prototype.onkeyup=function(event){event.preventDefault(),event.stopPropagation(),this.keyup$.next(event)},NgxTypeAheadComponent.prototype.onClick=function(){this.taDisplayOnFocus&&this.displaySuggestions()},NgxTypeAheadComponent.prototype.ngOnInit=function(){this.filterEnterEvent(this.keydown$),this.listenAndSuggest(this.keyup$),this.navigateWithArrows(this.keydown$),this.renderTemplate()},NgxTypeAheadComponent.prototype.ngOnDestroy=function(){this.keydown$.complete(),this.keyup$.complete()},NgxTypeAheadComponent.prototype.renderTemplate=function(){this.viewContainer.createEmbeddedView(this.suggestionsTplRef),this.cdr.markForCheck()},NgxTypeAheadComponent.prototype.listenAndSuggest=function(obs){var _this=this;obs.pipe(operators.filter(function(e){return validateNonCharKeyCode(e.keyCode)}),operators.map(toFormControlValue),operators.debounceTime(this.taDebounce),operators.concat(),operators.distinctUntilChanged(),operators.filter(function(query){return _this.taAllowEmpty||hasCharacters(query)}),operators.tap(function(query){return _this.searchQuery=query}),operators.switchMap(function(query){return _this.suggest(query)})).subscribe(function(results){_this.assignResults(results),_this.updateIndex(Key.ArrowDown),_this.displaySuggestions()})},NgxTypeAheadComponent.prototype.assignResults=function(results){var labelForDisplay=this.taListItemLabel;this.resultsAsItems=results,this.results=results.map(function(item){return labelForDisplay?item[labelForDisplay]:item}),this.suggestionIndex=-1,results&&results.length||(this.activeResult=this.searchQuery)},NgxTypeAheadComponent.prototype.filterEnterEvent=function(elementObs){var _this=this;elementObs.pipe(operators.filter(isEnterKey)).subscribe(function(event){_this.handleSelectSuggestion(_this.activeResult)})},NgxTypeAheadComponent.prototype.navigateWithArrows=function(elementObs){var _this=this;elementObs.pipe(operators.filter(function(e){return validateArrowKeys(e.keyCode)}),operators.map(function(e){return e.keyCode})).subscribe(function(keyCode){_this.updateIndex(keyCode),_this.displaySuggestions()})},NgxTypeAheadComponent.prototype.updateIndex=function(keyCode){this.suggestionIndex=resolveNextIndex(this.suggestionIndex,keyCode===Key.ArrowDown,this.results.length)},NgxTypeAheadComponent.prototype.displaySuggestions=function(){this.showSuggestions=!0,this.cdr.markForCheck()},NgxTypeAheadComponent.prototype.suggest=function(query){return this.taList.length?this.createListSource(this.taList,query):this.request(query)},NgxTypeAheadComponent.prototype.request=function(query){var url=this.taUrl,options={params:createParamsForQuery(query,this.taQueryParam,this.taParams)};return"jsonp"===this.taApi?this.requestJsonp(url,options,this.taCallbackParamValue):this.requestHttp(url,options)},NgxTypeAheadComponent.prototype.requestHttp=function(url,options){var apiMethod=resolveApiMethod(this.taApiMethod);return this.http[apiMethod](url,options)},NgxTypeAheadComponent.prototype.requestJsonp=function(url,options,callback){void 0===callback&&(callback="callback");var params=options.params.toString();return this.http.jsonp(url+"?"+params,callback).pipe(operators.map(toJsonpSingleResult),operators.map(toJsonpFinalResults))},NgxTypeAheadComponent.prototype.markIsActive=function(index,result){var isActive=isIndexActive(index,this.suggestionIndex);return isActive&&(this.activeResult=result),isActive},NgxTypeAheadComponent.prototype.handleSelectSuggestion=function(suggestion){var result=this.resultsAsItems.length?this.resultsAsItems[this.suggestionIndex]:suggestion;this.hideSuggestions(),this.taSelected.emit(result)},NgxTypeAheadComponent.prototype.hideSuggestions=function(){this.showSuggestions=!1},NgxTypeAheadComponent.prototype.hasItemTemplate=function(){return void 0!==this.taItemTpl},NgxTypeAheadComponent.prototype.createListSource=function(list,query){var _this=this,sanitizedQuery=this.taCaseSensitive?query:query.toLowerCase(),fieldsToExtract=this.taListItemField;return of(list.filter(function(item){return resolveItemValue(item,fieldsToExtract,_this.taCaseSensitive).includes(sanitizedQuery)}))},NgxTypeAheadComponent.decorators=[{type:core.Component,args:[{selector:"[ngxTypeahead]",styles:["\n      .ta-results {\n        position: absolute;\n      }\n      .ta-backdrop {\n        bottom: 0;\n        left: 0;\n        position: fixed;\n        right: 0;\n        top: 0;\n        z-index: 1;\n      }\n      .ta-item {\n        position: relative;\n        z-index: 2;\n        display: block;\n      }\n    "],template:'\n  <ng-template #suggestionsTplRef>\n  <section class="ta-results list-group" *ngIf="showSuggestions">\n    <div class="ta-backdrop" (click)="hideSuggestions()"></div>\n    <button type="button" class="ta-item list-group-item"\n      *ngFor="let result of results; let i = index;"\n      [class.active]="markIsActive(i, result)"\n      (click)="handleSelectSuggestion(result)">\n      <span *ngIf="!taItemTpl"><i class="fa fa-search"></i> {{ result }}</span>\n      <ng-template\n        [ngTemplateOutlet]="taItemTpl"\n        [ngTemplateOutletContext]="{ $implicit: {result: result, index: i} }"\n      ></ng-template>\n    </button>\n  </section>\n  </ng-template>\n  '}]}],NgxTypeAheadComponent.ctorParameters=function(){return[{type:core.ElementRef},{type:core.ViewContainerRef},{type:http.HttpClient},{type:core.ChangeDetectorRef}]},NgxTypeAheadComponent.propDecorators={taItemTpl:[{type:core.Input}],taUrl:[{type:core.Input}],taParams:[{type:core.Input}],taQueryParam:[{type:core.Input}],taCallbackParamValue:[{type:core.Input}],taApi:[{type:core.Input}],taApiMethod:[{type:core.Input}],taList:[{type:core.Input}],taListItemField:[{type:core.Input}],taListItemLabel:[{type:core.Input}],taDebounce:[{type:core.Input}],taAllowEmpty:[{type:core.Input}],taCaseSensitive:[{type:core.Input}],taDisplayOnFocus:[{type:core.Input}],taSelected:[{type:core.Output}],suggestionsTplRef:[{type:core.ViewChild,args:["suggestionsTplRef"]}],handleEsc:[{type:core.HostListener,args:["keydown",["$event"]]}],onkeyup:[{type:core.HostListener,args:["keyup",["$event"]]}],onClick:[{type:core.HostListener,args:["click"]}]},NgxTypeAheadComponent}(),NgxTypeaheadModule=function(){function NgxTypeaheadModule(){}return NgxTypeaheadModule.decorators=[{type:core.NgModule,args:[{declarations:[NgxTypeAheadComponent],exports:[NgxTypeAheadComponent,common.CommonModule],imports:[common.CommonModule,http.HttpClientModule,http.HttpClientJsonpModule],providers:[]}]}],NgxTypeaheadModule}();exports.NgxTypeaheadModule=NgxTypeaheadModule,exports.ɵa=NgxTypeAheadComponent,Object.defineProperty(exports,"__esModule",{value:!0})});