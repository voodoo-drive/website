{"version":3,"file":"ngx-typeahead.js","sources":["../../src/services/ngx-typeahead.utils.ts","../../src/modules/ngx-typeahead.component.ts","../../src/modules/ngx-typeahead.module.ts"],"sourcesContent":["import { HttpParams } from '@angular/common/http';\nimport { Key } from '../models';\n\nexport function validateNonCharKeyCode(keyCode: number) {\n  return [\n    Key.Enter,\n    Key.Tab,\n    Key.Shift,\n    Key.ArrowLeft,\n    Key.ArrowUp,\n    Key.ArrowRight,\n    Key.ArrowDown,\n    Key.MacCommandLeft,\n    Key.MacCommandRight,\n    Key.MacCommandFirefox\n  ].every(codeKey => codeKey !== keyCode);\n}\n\nexport function validateArrowKeys(keyCode: number) {\n  return keyCode === Key.ArrowDown || keyCode === Key.ArrowUp;\n}\n\nexport function isIndexActive(index: number, currentIndex: number) {\n  return index === currentIndex;\n}\n\nexport function isEnterKey(event: KeyboardEvent) {\n  return event.keyCode === Key.Enter;\n}\n\nexport function isEscapeKey(event: KeyboardEvent) {\n  return event.keyCode === Key.Escape;\n}\n\nexport function createParamsForQuery(\n  query: string,\n  queryParamKey = 'q',\n  customParams = {}\n) {\n  const searchParams = {\n    [queryParamKey]: query,\n    ...customParams\n  };\n  // tslint:disable-next-line\n  const setParam = (acc: HttpParams, param: string) =>\n    acc.set(param, searchParams[param]);\n  const params = Object.keys(searchParams).reduce(setParam, new HttpParams());\n  return params;\n}\n\nexport function resolveApiMethod(method = '') {\n  const isMethodValid = [\n    'get',\n    'post',\n    'put',\n    'delete',\n    'patch',\n    'request'\n  ].some(methodName => method === methodName);\n  const apiMethod = isMethodValid ? method : 'get';\n  return apiMethod;\n}\n\nexport function resolveNextIndex(\n  currentIndex: number,\n  stepUp: boolean,\n  listLength = 10\n) {\n  const step = stepUp ? 1 : -1;\n  const topLimit = listLength - 1;\n  const bottomLimit = 0;\n  const currentResultIndex = currentIndex + step;\n  let resultIndex = currentResultIndex;\n  if (currentResultIndex === topLimit + 1) {\n    resultIndex = bottomLimit;\n  }\n  if (currentResultIndex === bottomLimit - 1) {\n    resultIndex = topLimit;\n  }\n  return resultIndex;\n}\n\nexport function toJsonpSingleResult(response: any) {\n  return response[1];\n}\n\nexport function toJsonpFinalResults(results: any[]) {\n  return results.map((result: any) => result[0]);\n}\n\nexport function hasCharacters(query: string) {\n  return query.length > 0;\n}\n\nexport function toFormControlValue(e: any) {\n  return e.target.value;\n}\n\nexport function resolveItemValue(\n  item: string | any,\n  fieldsToExtract: string[],\n  caseSensitive = false\n) {\n  let newItem = item;\n  if (!item.hasOwnProperty('length')) {\n    const fields = !fieldsToExtract.length\n      ? Object.keys(item)\n      : fieldsToExtract;\n    newItem = fields.reduce((acc, cur) => `${acc}${item[cur]}`, '');\n  }\n  return caseSensitive ? newItem : newItem.toLowerCase();\n}\n","import { HttpClient } from '@angular/common/http';\nimport {\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  TemplateRef,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport { of, Observable, Subject, Subscription } from 'rxjs';\nimport {\n  concat,\n  debounceTime,\n  distinctUntilChanged,\n  filter,\n  map,\n  switchMap,\n  takeUntil,\n  tap\n} from 'rxjs/operators';\nimport { Key } from '../models';\nimport {\n  createParamsForQuery,\n  hasCharacters,\n  isEnterKey,\n  isEscapeKey,\n  isIndexActive,\n  resolveApiMethod,\n  resolveNextIndex,\n  toFormControlValue,\n  toJsonpFinalResults,\n  toJsonpSingleResult,\n  validateArrowKeys,\n  validateNonCharKeyCode,\n  resolveItemValue\n} from '../services/ngx-typeahead.utils';\n\n/*\n using an external template:\n <input [taItemTpl]=\"itemTpl\" >\n\n  <ng-template #itemTpl let-result>\n    <strong>MY {{ result.result }}</strong>\n  </ng-template>\n*/\n@Component({\n  selector: '[ngxTypeahead]',\n  styles: [\n    `\n      .ta-results {\n        position: absolute;\n      }\n      .ta-backdrop {\n        bottom: 0;\n        left: 0;\n        position: fixed;\n        right: 0;\n        top: 0;\n        z-index: 1;\n      }\n      .ta-item {\n        position: relative;\n        z-index: 2;\n        display: block;\n      }\n    `\n  ],\n  template: `\n  <ng-template #suggestionsTplRef>\n  <section class=\"ta-results list-group\" *ngIf=\"showSuggestions\">\n    <div class=\"ta-backdrop\" (click)=\"hideSuggestions()\"></div>\n    <button type=\"button\" class=\"ta-item list-group-item\"\n      *ngFor=\"let result of results; let i = index;\"\n      [class.active]=\"markIsActive(i, result)\"\n      (click)=\"handleSelectSuggestion(result)\">\n      <span *ngIf=\"!taItemTpl\"><i class=\"fa fa-search\"></i> {{ result }}</span>\n      <ng-template\n        [ngTemplateOutlet]=\"taItemTpl\"\n        [ngTemplateOutletContext]=\"{ $implicit: {result: result, index: i} }\"\n      ></ng-template>\n    </button>\n  </section>\n  </ng-template>\n  `\n})\nexport class NgxTypeAheadComponent implements OnInit, OnDestroy {\n  showSuggestions = false;\n  results: string[] = [];\n\n  @Input() taItemTpl!: TemplateRef<any>;\n  @Input() taUrl = '';\n  @Input() taParams = {};\n  @Input() taQueryParam = 'q';\n  @Input() taCallbackParamValue;\n  @Input() taApi = 'jsonp';\n  @Input() taApiMethod = 'get';\n  @Input() taList = [];\n  @Input() taListItemField = [];\n  @Input() taListItemLabel = '';\n  @Input() taDebounce = 300;\n  @Input() taAllowEmpty = false;\n  @Input() taCaseSensitive = false;\n  @Input() taDisplayOnFocus = false;\n\n  @Output() taSelected = new EventEmitter<string | any>();\n\n  @ViewChild('suggestionsTplRef') suggestionsTplRef!: TemplateRef<any>;\n\n  private suggestionIndex = 0;\n  private subscriptions: Subscription[] = [];\n  private activeResult = '';\n  private searchQuery = '';\n  private selectedItem: any = {};\n  private resultsAsItems: any[] = [];\n  private keydown$ = new Subject<KeyboardEvent>();\n  private keyup$ = new Subject<KeyboardEvent>();\n\n  constructor(\n    private element: ElementRef,\n    private viewContainer: ViewContainerRef,\n    private http: HttpClient,\n    private cdr: ChangeDetectorRef\n  ) {}\n\n  @HostListener('keydown', ['$event'])\n  handleEsc(event: KeyboardEvent) {\n    if (isEscapeKey(event)) {\n      this.hideSuggestions();\n      event.preventDefault();\n    }\n    this.keydown$.next(event);\n  }\n\n  @HostListener('keyup', ['$event'])\n  onkeyup(event: KeyboardEvent) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.keyup$.next(event);\n  }\n\n  @HostListener('click')\n  onClick() {\n    if (this.taDisplayOnFocus) {\n      this.displaySuggestions();\n    }\n  }\n\n  ngOnInit() {\n    this.filterEnterEvent(this.keydown$);\n    this.listenAndSuggest(this.keyup$);\n    this.navigateWithArrows(this.keydown$);\n    this.renderTemplate();\n  }\n\n  ngOnDestroy() {\n    this.keydown$.complete();\n    this.keyup$.complete();\n  }\n\n  renderTemplate() {\n    this.viewContainer.createEmbeddedView(this.suggestionsTplRef);\n    this.cdr.markForCheck();\n  }\n\n  listenAndSuggest(obs: Subject<KeyboardEvent>) {\n    obs\n      .pipe(\n        filter((e: KeyboardEvent) => validateNonCharKeyCode(e.keyCode)),\n        map(toFormControlValue),\n        debounceTime(this.taDebounce),\n        concat(),\n        distinctUntilChanged(),\n        filter((query: string) => this.taAllowEmpty || hasCharacters(query)),\n        tap((query: string) => (this.searchQuery = query)),\n        switchMap((query: string) => this.suggest(query))\n      )\n      .subscribe((results: string[] | any) => {\n        this.assignResults(results);\n        this.updateIndex(Key.ArrowDown);\n        this.displaySuggestions();\n      });\n  }\n\n  assignResults(results: any[]) {\n    const labelForDisplay = this.taListItemLabel;\n    this.resultsAsItems = results;\n    this.results = results.map(\n      (item: string | any) => (labelForDisplay ? item[labelForDisplay] : item)\n    );\n    this.suggestionIndex = -1;\n    if (!results || !results.length) {\n      this.activeResult = this.searchQuery;\n    }\n  }\n\n  filterEnterEvent(elementObs: Subject<KeyboardEvent>) {\n    elementObs.pipe(filter(isEnterKey)).subscribe((event: KeyboardEvent) => {\n      this.handleSelectSuggestion(this.activeResult);\n    });\n  }\n\n  navigateWithArrows(elementObs: Subject<KeyboardEvent>) {\n    elementObs\n      .pipe(\n        filter((e: any) => validateArrowKeys(e.keyCode)),\n        map((e: any) => e.keyCode)\n      )\n      .subscribe((keyCode: number) => {\n        this.updateIndex(keyCode);\n        this.displaySuggestions();\n      });\n  }\n\n  updateIndex(keyCode: number) {\n    this.suggestionIndex = resolveNextIndex(\n      this.suggestionIndex,\n      keyCode === Key.ArrowDown,\n      this.results.length\n    );\n  }\n\n  displaySuggestions() {\n    this.showSuggestions = true;\n    this.cdr.markForCheck();\n  }\n\n  suggest(query: string) {\n    return this.taList.length\n      ? this.createListSource(this.taList, query)\n      : this.request(query);\n  }\n\n  /**\n   * peforms a jsonp/http request to search with query and params\n   * @param query the query to search from the remote source\n   */\n  request(query: string) {\n    const url = this.taUrl;\n    const searchConfig = createParamsForQuery(\n      query,\n      this.taQueryParam,\n      this.taParams\n    );\n    const options = {\n      params: searchConfig\n    };\n    const isJsonpApi = this.taApi === 'jsonp';\n    return isJsonpApi\n      ? this.requestJsonp(url, options, this.taCallbackParamValue)\n      : this.requestHttp(url, options);\n  }\n\n  requestHttp(url: string, options) {\n    const apiMethod = resolveApiMethod(this.taApiMethod);\n    return this.http[apiMethod](url, options);\n  }\n\n  requestJsonp(url, options, callback = 'callback') {\n    const params = options.params.toString();\n    return this.http.jsonp(`${url}?${params}`, callback).pipe(\n      map(toJsonpSingleResult),\n      map(toJsonpFinalResults)\n    );\n  }\n\n  markIsActive(index: number, result: string) {\n    const isActive = isIndexActive(index, this.suggestionIndex);\n    if (isActive) {\n      this.activeResult = result;\n    }\n    return isActive;\n  }\n\n  handleSelectSuggestion(suggestion: string) {\n    const result = this.resultsAsItems.length\n      ? this.resultsAsItems[this.suggestionIndex]\n      : suggestion;\n    this.hideSuggestions();\n    this.taSelected.emit(result);\n  }\n\n  hideSuggestions() {\n    this.showSuggestions = false;\n  }\n\n  hasItemTemplate() {\n    return this.taItemTpl !== undefined;\n  }\n\n  createListSource(list: any[], query: string): Observable<string[]> {\n    const sanitizedQuery = this.taCaseSensitive ? query : query.toLowerCase();\n    const fieldsToExtract = this.taListItemField;\n    return of(\n      list.filter((item: string | any) => {\n        return resolveItemValue(\n          item,\n          fieldsToExtract,\n          this.taCaseSensitive\n        ).includes(sanitizedQuery);\n      })\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule, HttpClientJsonpModule } from '@angular/common/http';\n\nimport { NgxTypeAheadComponent } from './ngx-typeahead.component';\n\n@NgModule({\n  declarations: [NgxTypeAheadComponent],\n  exports: [NgxTypeAheadComponent, CommonModule],\n  imports: [CommonModule, HttpClientModule, HttpClientJsonpModule],\n  providers: []\n})\nexport class NgxTypeaheadModule {}\n"],"names":["http"],"mappings":"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"}